<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://skeyll.github.io/SynicSugar/main.css">
    <link rel="icon" href="https://github.com/skeyll/SynicSugar/blob/main/Resources/favicon.ico?raw=true">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> SynicSugar | SearchAndCreateLobby </title>
</head>
<body>

<script>
        fetch('https://api.github.com/repos/skeyll/SynicSugar/releases/latest')
            .then((response) => {
                return response.json();
            })
            .then((data) => {
                let release_name = data.name;
                let html_url = data.html_url;
                release.innerHTML = `<a href='${html_url}'>${release_name}</a>`;
            });
    </script>
<main>
    
    <nav>
            <a href="https:&#x2F;&#x2F;skeyll.github.io&#x2F;SynicSugar&#x2F;">
                        <img src="https://github.com/skeyll/SynicSugar/blob/main/Resources/Logo_doc.png?raw=true" alt="logo"/>
                    </a>
                <div id="release"></div>
            <a href="javascript:void(0);" onclick="burger()" id="mobile" class="ms-Icon--GlobalNavButton"></a>
            <div id="trees">
                <input class="tree-toggle" type="checkbox" id="aboutsynicsugar"
                           />
                    <label class="tree-toggle-label"
                           for="aboutsynicsugar">AboutSynicSugar</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/AboutSynicSugar/overview/">Overview</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/AboutSynicSugar/internaldesign/">InternalDesign</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/AboutSynicSugar/faq/">FAQ</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/AboutSynicSugar/networking-lifecycle/">Nerworking Lifecycle</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/AboutSynicSugar/symbols/">Symbols</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="gettingstarted"
                           />
                    <label class="tree-toggle-label"
                           for="gettingstarted">GettingStarted</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/GettingStarted/import-setup/">Import and Set up</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/GettingStarted/helloworld/">Hello World</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-core"
                           />
                    <label class="tree-toggle-label"
                           for="synicsugar-core">SynicSugar.Core</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.Core/synicsugarmanger/">SynicSugarManger</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.Core/result/">Result</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-auth"
                           />
                    <label class="tree-toggle-label"
                           for="synicsugar-auth">SynicSugar.Auth</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.Auth/synicsugarauthentication/">SynicSugarAuthentication</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.Auth/synicsugaraccount/">SynicSugarAccount</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-matchmake"
                           checked/>
                    <label class="tree-toggle-label"
                           for="synicsugar-matchmake">SynicSugar.MatchMake</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/matchmakemanager/">MatchMakeManager</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/lobby/">Lobby</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/attributedata/">AttributeData</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/matchmakingguievents/">MatchMakingGUIEvents</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/lobbyidmethod/">LobbyIDMethod</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.MatchMake/asynclobbyidmethod/">AsyncLobbyIDMethod</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-p2p"
                           />
                    <label class="tree-toggle-label"
                           for="synicsugar-p2p">SynicSugar.P2P</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/p2pconfig/">p2pConfig</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/attributes/">Attributes</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/synicobject/">SynicObject</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/userid/">UserId</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/connecthub/">ConnectHub</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/p2pinfo/">p2pInfo</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/p2pstrcut/">p2pStruct</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/additionalclass/">AdditionalClass</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.P2P/eosp2p/">EOSp2p</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-rtc"
                           />
                    <label class="tree-toggle-label"
                           for="synicsugar-rtc">SynicSugar.RTC</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.RTC/rtcconfig/">RTCConfig</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.RTC/rtcmanager/">RTCManager</a>
                            </li>

                            <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.RTC/rtcstruct/">RTCStruct</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="synicsugar-titlesorage"
                           />
                    <label class="tree-toggle-label"
                           for="synicsugar-titlesorage">SynicSugar.TitleSorage</label>

                    <ul class="subtree">
                        <li >
                                <a href="https://skeyll.github.io/SynicSugar/SynicSugar.TitleSorage/eostitlestorage/">EOSTitleStorage</a>
                            </li>

                            </ul>
                </div>
        </nav>
    <article>

        <div id="on_right">
                <span id="search-ico" class="ms-Icon--Search"></span>
            </div>
            <div class="search-container">
                <input id="search" type="search" placeholder="Search as you type...">
                <div class="search-results">
                    <div class="search-results__header"></div>
                    <ul class="search-results__items"></ul>
                </div>
            </div>
        <div id="wrap">
            
        <h2 id="searchandcreatelobby">SearchAndCreateLobby&nbsp;<a class="anchor" href="#searchandcreatelobby">&#xE732;</a></h2>
<p><small><em>Namespace: SynicSugar.MatchMake</em> <br>
<em>Class: MatchMakeManager</em> </small></p>
<h5 id="auto-matchmaking">Auto matchmaking&nbsp;<a class="anchor" href="#auto-matchmaking">&#xE732;</a></h5>
<p>public async UniTask&lt;bool&gt; SearchAndCreateLobby(Lobby lobbyCondition, CancellationTokenSource token = default(CancellationTokenSource))<br></p>
<h5 id="manual-matchmaking">Manual matchmaking&nbsp;<a class="anchor" href="#manual-matchmaking">&#xE732;</a></h5>
<p>public async UniTask&lt;bool&gt; SearchAndCreateLobby(Lobby lobbyCondition, uint minLobbyMember, List&lt;AttributeData&gt; userAttributes = null, CancellationTokenSource token = default(CancellationTokenSource))</p>
<h3 id="description">Description&nbsp;<a class="anchor" href="#description">&#xE732;</a></h3>
<p>Start MatchMake with args condition and get the data for p2p connect.<br>
At first, search and try to join. If can't, the user create lobby as host.<br>
If success and finish preparation p2p connect, return true. If not (by timeout or anything problem), return false.<br></p>
<p>This CancellationTokenSource is used only to cancel matchmaking. <br>
Usually we don't need pass token source. If not pass, when we call CancelMatchMaking(), we get just bool result from this method. If pass source, we need TryCatch for CancelMatching.<br>
When matchmaking fails, this always returns false, not an exception. To get result code, use <em><a href="../../../SynicSugar.MatchMake/MatchMakeManager/lastresultcode">LastResultCode</a></em>.<br></p>
<p>For Host to conclude matchmaking, pass minLobbyMember. This allows Host to kick other member, and end matchmaking after meeting members condition. In the case, the matchmaking won't have ended until Host conclude it in manual.<br>
The value is 0, less than LobbyMaxMembers or null, the matchmaking becomes Auto(Random) matchmaking. <br>
Auto does not allow Host to kick Guests, and anyone who meets the lobbyCondition can join the lobby. When the lobby is full, closes the lobby not to join and start to prepare p2p automatically.</p>
<p>userAttributes is for matchmaking. The user attributes of names, job and so on that is needed before P2P. <br>
These should be used just for matchmaking and the kick, the data for actual game should be exchanged via p2p for security and server bandwidth.</p>
<pre data-lang="cs" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-cs "><code class="language-cs" data-lang="cs"><span style="color:#9b9b9b;">using </span><span>UnityEngine;
</span><span style="color:#608b4e;">// using System.Threading;
</span><span style="color:#9b9b9b;">using </span><span>Cysharp.Threading.Tasks;
</span><span style="color:#9b9b9b;">using </span><span>SynicSugar.MatchMake;
</span><span>
</span><span style="color:#569cd6;">public class </span><span>MatchMake : </span><span style="color:#4ec9b0;">MonoBehaviour </span><span>{
</span><span>    Lobby condition; </span><span style="color:#608b4e;">//Create a Lobby as a condition before matchmake.
</span><span>    </span><span style="color:#569cd6;">async </span><span>UniTask StartMatching(){
</span><span>        Result result = </span><span style="color:#569cd6;">await </span><span>MatchMakeManager.Instance.SearchAndCreateLobby(condition);
</span><span>
</span><span>        </span><span style="color:#608b4e;">// //try catch
</span><span>        </span><span style="color:#608b4e;">// Result result;
</span><span>        </span><span style="color:#608b4e;">// try{
</span><span>        </span><span style="color:#608b4e;">//     CancellationTokenSource cts = new CancellationTokenSource();
</span><span>        </span><span style="color:#608b4e;">//     //Get Success or Failuer
</span><span>        </span><span style="color:#608b4e;">//     result = await MatchMakeManager.Instance.SearchAndCreateLobby(condition, cts);
</span><span>        </span><span style="color:#608b4e;">// }catch(OperationCanceledException){
</span><span>        </span><span style="color:#608b4e;">//     //Cancel matchmaking
</span><span>        </span><span style="color:#608b4e;">//     result = Result.Canceled;
</span><span>        </span><span style="color:#608b4e;">// }
</span><span>        
</span><span>        </span><span style="color:#569cd6;">if</span><span>(result </span><span style="color:#569cd6;">!= </span><span>Result.Success){
</span><span>            </span><span style="color:#608b4e;">//Failuer
</span><span>            </span><span style="color:#569cd6;">return</span><span>;
</span><span>        }
</span><span>        </span><span style="color:#608b4e;">//Success
</span><span>    }
</span><span>}
</span></code></pre>

    
        </div>

    </article>
</main>


    <script type="text/javascript" src="https://skeyll.github.io/SynicSugar/elasticlunr.min.js" defer></script>
    <script type="text/javascript" src="https://skeyll.github.io/SynicSugar/search_index.en.js" defer></script>
<script type="text/javascript" src="https://skeyll.github.io/SynicSugar/js.js" defer></script>

</body>
</html>
